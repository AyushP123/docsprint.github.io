<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Xapian Learning-to-Rank &#8212; Getting Started with Xapian v1.4.1</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Getting Started with Xapian v1.4.1" href="../index.html" />
    <link rel="up" title="How To..." href="index.html" />
    <link rel="next" title="Advanced features" href="../advanced/index.html" />
    <link rel="prev" title="Iterate through all documents" href="iterate_all_docs.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../advanced/index.html" title="Advanced features"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="iterate_all_docs.html" title="Iterate through all documents"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Getting Started with Xapian v1.4</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">How To...</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="xapian-learning-to-rank">
<h1><a class="toc-backref" href="#id1">Xapian Learning-to-Rank</a><a class="headerlink" href="#xapian-learning-to-rank" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#xapian-learning-to-rank" id="id1">Xapian Learning-to-Rank</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a><ul>
<li><a class="reference internal" href="#learning-the-model" id="id3">Learning the model</a></li>
<li><a class="reference internal" href="#ranking" id="id4">Ranking</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features" id="id5">Features</a></li>
<li><a class="reference internal" href="#how-to-use" id="id6">How to Use</a><ul>
<li><a class="reference internal" href="#checking-quality-of-ranking" id="id7">Checking quality of ranking</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extendability" id="id8">Extendability</a><ul>
<li><a class="reference internal" href="#adding-new-features" id="id9">Adding new Features</a></li>
<li><a class="reference internal" href="#adding-a-new-ltr-algorithm-ranker" id="id10">Adding a new LTR Algorithm (Ranker)</a></li>
<li><a class="reference internal" href="#adding-a-new-ranking-quality-metric-scorer" id="id11">Adding a new ranking quality metric (Scorer)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Learning-to-Rank(LTR) can be viewed as a weighting scheme which involves machine learning. The Machine Learning involved requires training data to build a model. So if you have some training data with relevance judgements then you can train the LTR model and can use it to assign score to documents for the new query. Learning-to-Rank has gained immense popularity and attention among researchers recently. Xapian is the first project with Learning-to-Rank functionality added to it.</p>
<p>The main idea behind LTR is that there are many relevant documents low down in the ranked list and we wish to move them up in the rankings to replace irrelevant documents. We identify such relevant and irrelevant documents by their feature vectors. Before understanding about these features and how it works, it would be important to look at the typical Learning-to-Rank training data:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span>0 qid:10032 1:0.130742 2:0.000000 3:0.333333 4:0.000000 ... 18:0.750000 19:1.000000 #docid = 1123323
1 qid:10032 1:0.593640 2:1.000000 3:0.000000 4:0.000000 ... 18:0.500000 19:0.023400 #docid = 4222333
</pre></div>
</div>
<p>Here each row represents the document for the specified query. The first column is the relevance label and which can take two values: 0 for irrelevant and 1 for relevant documents. The second column represents the queryid, and the last column is the docid. The third column represents the value of the features.</p>
<p>LTR can be broadly seen in two stages: Learning the model &amp; Ranking. Learning the model takes the training file as input in the above mentioned format and produces a model. After that given this learnt model, when a new query comes in, scores can be assigned to the documents associated to it.</p>
<div class="section" id="learning-the-model">
<h3><a class="toc-backref" href="#id3">Learning the model</a><a class="headerlink" href="#learning-the-model" title="Permalink to this headline">¶</a></h3>
<p>As mentioned before, this process requires a training file in the above format. xapian-letor API empowers you to generate such training file. But for that you have to supply some information files like:</p>
<ol class="arabic">
<li><p class="first">Query file: This file has information of queries to be involved in
learning and its id. It should be formatted in such a way:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span>2010001 &#39;landslide malaysia&#39;
2010002 &#39;search engine&#39;
2010003 &#39;Monuments of India&#39;
2010004 &#39;Indian food&#39;
</pre></div>
</div>
<p>where 2010xxx being query-id followed by a comma separated query in
single-quotes.</p>
</li>
<li><p class="first">Qrel file: This is the file containing relevance judgements. It should
be formatted in this way:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="mi">2010003</span> <span class="n">Q0</span> <span class="mi">19243417</span> <span class="mi">1</span>
<span class="mi">2010003</span> <span class="n">Q0</span> <span class="mi">3256433</span> <span class="mi">1</span>
<span class="mi">2010003</span> <span class="n">Q0</span> <span class="mi">275014</span> <span class="mi">1</span>
<span class="mi">2010003</span> <span class="n">Q0</span> <span class="mi">298021</span> <span class="mi">0</span>
<span class="mi">2010003</span> <span class="n">Q0</span> <span class="mi">1456811</span> <span class="mi">0</span>
</pre></div>
</div>
<p>where first column is query-id, third column is Document-id and fourth
column being relevance label which is 0 for irrelevance and 1 for
relevance. Second column is many times referred as &#8216;iter&#8217; but doesn&#8217;t
really important for us.  All the fields are whitespace delimited. This is
the standard format of almost all the relevance judgement files. If you
have little different relevance judgement file then you can easily convert
it in such file using basic &#8216;awk&#8217; command.</p>
</li>
<li><p class="first">Collection Index : Here you supply the path to the index of the corpus
generated using <a class="reference external" href="https://xapian.org/docs/omega/overview.html">Omega</a>. If
you have &#8216;title&#8217; information in the collection with some xml/html tag or so
then add:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">indexer</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="n">title</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;S&quot;</span><span class="p">);</span>     <span class="n">in</span> <span class="n">omindex</span><span class="p">.</span><span class="n">cc</span>
</pre></div>
</div>
</li>
</ol>
<p>Provided such information, API is capable of creating the training file which is in the mentioned format and can be easily used for learning a model. In xapian-letor we support the following learning algorithms:</p>
<blockquote>
<div><ol class="arabic simple">
<li><a class="reference external" href="http://dl.acm.org/citation.cfm?id=1273513">ListNET</a></li>
<li><a class="reference external" href="http://dl.acm.org/citation.cfm?id=775067">Ranking-SVM</a></li>
<li><a class="reference external" href="http://icml2008.cs.helsinki.fi/papers/167.pdf">ListMLE</a></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="ranking">
<h3><a class="toc-backref" href="#id4">Ranking</a><a class="headerlink" href="#ranking" title="Permalink to this headline">¶</a></h3>
<p>After we have built a model, its quite straightforward to get a real score for a particular document for the given query. Here we supply the first hand retrieved ranked-list to the Ranking function, which assigns a new score to each document after converting it to the same dimensioned feature vector. This list is re-ranked according to the new scores.</p>
</div>
</div>
<div class="section" id="features">
<h2><a class="toc-backref" href="#id5">Features</a><a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>Features play a major role in the learning. In LTR, features are mainly of three types: query dependent, document dependent (pagerank, inLink/outLink number, number of children, etc) and query-document pair dependent (TF-IDF Score, BM25 Score, etc).</p>
<p>Currently we have incorporated 19 features which are described below. These features are statistically tested in <cite>Nallapati2004</cite> &lt;<a class="reference external" href="http://dl.acm.org/citation.cfm?id=1009006">http://dl.acm.org/citation.cfm?id=1009006</a>&gt;_.</p>
<blockquote>
<div><p>Here c(w,D) means that count of term w in Document D. C represents the Collection. &#8216;n&#8217; is the total number of terms in query.
 is size-of function and idf(.) is the inverse-document-frequency.</p>
<ol class="arabic simple">
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ol>
</div></blockquote>
<p>All the above 6 features are calculated considering &#8216;title only&#8217;, &#8216;body only&#8217; and &#8216;whole&#8217; document. So they make in total 6*3=18 features. The 19th feature is the Xapian weighting scheme score assigned to the document (by default this is BM25).The API gives a choice to select which specific features you want to use. By default, all the 19 features defined above are used.</p>
<p>One thing that should be noticed is that all the feature values are <a class="reference external" href="https://trac.xapian.org/wiki/GSoC2011/LTR/Notes#QueryLevelNorm">normalized at Query-Level</a>. That means that the values of a particular feature for a particular query are divided by its query-level maximum value and hence all the feature values will be between 0 and 1. This normalization helps for unbiased learning.</p>
<table class="docutils citation" frame="void" id="nallapati2004" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Nallapati2004]</td><td>Nallapati, R. Discriminative models for information retrieval. Proceedings of SIGIR 2004 (pp. 64-71).</td></tr>
</tbody>
</table>
</div>
<div class="section" id="how-to-use">
<h2><a class="toc-backref" href="#id6">How to Use</a><a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>The whole process can be seen as the following steps:</p>
<ol class="arabic simple">
<li>Index the collection using the Omindex with title information preserved if any with prefix &#8216;S&#8217;.</li>
</ol>
<p>In omindex.cc you should ensure the following call to indexer.index() as below if your corpus contains
title information, because that way Xapian::Letor API would be able to calculate the above mentioned features for
&#8216;title only&#8217; category:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">indexer</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="n">title</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;S&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>You should have set the &#8216;title&#8217; field by prefix &#8220;S&#8221; in harmony to the index. If your
corpus contains title information in some other xml tag than &#8216;title&#8217;, you should tweak omindex accordingly
and set the prefix accordingly below:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">parser</span><span class="p">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="s">&quot;title&quot;</span><span class="p">,</span><span class="s">&quot;S&quot;</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Generate the training file if you haven&#8217;t already one, supplying query-file, qrel-file and created index.</li>
</ol>
<p>In xapian-prepare-trainingfile.cc you should first define the object of Xapian::Letor class and then call
ltr.prepare_training_file(queryfile, qrelfile, msize, trainingfile) method. This method fires each query in the queryfile on the supplied built index and MSet is generated. Using Xapian::FeatureList, Xapian::FeatureVectors are computed for each of the items in the MSet using Xapian::Feature subclasses. The API gives an option of which features you want to use. By default, all 19 features are selected. Then this FeatureVector is written off in the training file
after fetching its relevance label from the qrelfile. Basically in this method the whole qrel file is read fetched
in a map&lt;qid,map&lt;docid,RelLabel&gt;&gt; kind of data structure, from which the relevance label is retrieved by supplying
qid (we get from queryfile and docid (we get from MSet). Example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">ltr</span><span class="p">.</span><span class="n">prepare_training_file</span><span class="p">(</span><span class="o">&lt;</span><span class="n">queryfile</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">qrelfile</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">MSet</span><span class="o">-</span><span class="n">size</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">trainingfile</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div>
</div>
<p>The above code will generate a training file with the &lt;trainingfile&gt; path provided.</p>
<ol class="arabic simple" start="3">
<li>Learn the letor model.</li>
</ol>
<p>In xapian-train.cc, with the training file just created you can learn the model and save it as an external file:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">Xapian</span><span class="o">::</span><span class="n">Ranker</span> <span class="o">*</span> <span class="n">ranker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Xapian</span><span class="o">::</span><span class="n">ListNETRanker</span><span class="p">();</span>
<span class="n">Xapian</span><span class="o">::</span><span class="n">Letor</span> <span class="n">ltr</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">ranker</span><span class="p">);</span>
<span class="n">ltr</span><span class="p">.</span><span class="n">letor_learn_model</span><span class="p">(</span><span class="o">&lt;</span><span class="n">trainingfile</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">modelfile</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div>
</div>
<p>letor_learn_model() will generate a model file with the file-name and path you supplied at &lt;modelfile&gt;. It is essential to initialise a Letor class object with a Ranker instance. The API gives an option of choosing which Ranker algorithm and related parameters you want to use. If not initialised explicitly as done above, the default ranking algorithm is used.</p>
<ol class="arabic simple" start="4">
<li>Re-rank the documents using letor model</li>
</ol>
<p>In xapian-rank.cc, method letor_rank(*) will get re-rank the MSet generated by Xapian weighting scheme (BM25 by default) by using the trained model created by xapian-train.cc. It will return a vector of Xapian::docid sorted by score that is assigned to the document by the model:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">Xapian</span><span class="o">::</span><span class="n">Ranker</span> <span class="o">*</span> <span class="n">ranker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Xapian</span><span class="o">::</span><span class="n">ListNETRanker</span><span class="p">();</span>
<span class="n">Xapian</span><span class="o">::</span><span class="n">Letor</span> <span class="n">ltr</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">ranker</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Xapian</span><span class="o">::</span><span class="n">docid</span><span class="o">&gt;</span> <span class="n">ranked_docids</span> <span class="o">=</span> <span class="n">ltr</span><span class="p">.</span><span class="n">letor_rank</span><span class="p">(</span><span class="o">&lt;</span><span class="n">MSet_to_be_reranked</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">modelfile</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">Xapian</span><span class="o">::</span><span class="n">Letor</span> <span class="n">ltr</span><span class="p">;</span>
<span class="n">ltr</span><span class="p">.</span><span class="n">set_database</span><span class="p">(</span><span class="n">db</span><span class="p">);</span>
<span class="n">ltr</span><span class="p">.</span><span class="n">set_query</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">ltr</span><span class="p">.</span><span class="n">set_ranker</span><span class="p">(</span><span class="k">new</span> <span class="n">Xapian</span><span class="o">::</span><span class="n">ListNETRanker</span><span class="p">());</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Xapian</span><span class="o">::</span><span class="n">docid</span><span class="o">&gt;</span> <span class="n">ranked_docids</span> <span class="o">=</span> <span class="n">ltr</span><span class="p">.</span><span class="n">letor_rank</span><span class="p">(</span><span class="o">&lt;</span><span class="n">MSet_to_be_reranked</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">modelfile</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div>
</div>
<p>Same as said above, the API gives you an option of which Ranker to use and which features to use (via FeatureList class), or just use the default ones. Just make sure that you use the same Ranker instance and features as used in xapian-train.cc</p>
<div class="section" id="checking-quality-of-ranking">
<h3><a class="toc-backref" href="#id7">Checking quality of ranking</a><a class="headerlink" href="#checking-quality-of-ranking" title="Permalink to this headline">¶</a></h3>
<p>xapian-letor has support for Scorer metrics to check the ranking quality of LTR model. Ranking quality score is calculated based on the relevance label of ranked document obtained from the Qrel file. Currently we support the following quality metrics:</p>
<blockquote>
<div><ol class="arabic simple">
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Discounted_cumulative_gain#Normalized_DCG">Normalised Discounted Cumulative Gain (NDCG) measure</a></li>
</ol>
</div></blockquote>
<p>To score your model perform the following steps:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">Xapian</span><span class="o">::</span><span class="n">Letor</span> <span class="n">ltr</span><span class="p">(</span><span class="n">db</span><span class="p">);</span>
<span class="n">ltr</span><span class="p">.</span><span class="n">set_ranker</span><span class="p">(</span><span class="k">new</span> <span class="n">Xapian</span><span class="o">::</span><span class="n">ListNETRanker</span><span class="p">());</span>
<span class="n">ltr</span><span class="p">.</span><span class="n">set_scorer</span><span class="p">(</span><span class="k">new</span> <span class="n">Xapian</span><span class="o">::</span><span class="n">NDCGScore</span><span class="p">());</span>
<span class="n">ltr</span><span class="p">.</span><span class="n">letor_score</span><span class="p">(</span><span class="o">&lt;</span><span class="n">queryfile_path</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">qrelfile_path</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">modelfile_path</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">outputfile_path</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">MSetsize</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Xapian</span><span class="o">::</span><span class="n">FeatureList</span> <span class="o">&amp;</span><span class="n">flist</span><span class="p">);</span>
</pre></div>
</div>
<p>Make sure that you use the same LTR algorithm (Ranker) and same set of Features (via Xapian::FeatureList) that were used while preparing the model you are evaluating, otherwise it will throw and exception. letor_score() method will return the model score for each query in the query file and an average score for all the queries. The results get saved at &lt;outputfile_path&gt;.</p>
</div>
</div>
<div class="section" id="extendability">
<h2><a class="toc-backref" href="#id8">Extendability</a><a class="headerlink" href="#extendability" title="Permalink to this headline">¶</a></h2>
<p>xapian-letor can be easily extended for new LTR algorithms (Rankers) and/or to incorporate new features.</p>
<div class="section" id="adding-new-features">
<h3><a class="toc-backref" href="#id9">Adding new Features</a><a class="headerlink" href="#adding-new-features" title="Permalink to this headline">¶</a></h3>
<p>To add a new feature you should define a new Feature subclass like Xapian::IdfFeature and put its implementation in feature subdirectory. Each of the Feature subclasses requests required values from Feature::Internal class defined in the feature subdirectory. So, check that and add any method that your Feature subclass will require to it.</p>
</div>
<div class="section" id="adding-a-new-ltr-algorithm-ranker">
<h3><a class="toc-backref" href="#id10">Adding a new LTR Algorithm (Ranker)</a><a class="headerlink" href="#adding-a-new-ltr-algorithm-ranker" title="Permalink to this headline">¶</a></h3>
<p>To add a new LTR algorithm you should define a new Ranker subclass like Xapian::ListNETRanker and put its implementation in the ranker subdirectory.</p>
</div>
<div class="section" id="adding-a-new-ranking-quality-metric-scorer">
<h3><a class="toc-backref" href="#id11">Adding a new ranking quality metric (Scorer)</a><a class="headerlink" href="#adding-a-new-ranking-quality-metric-scorer" title="Permalink to this headline">¶</a></h3>
<p>To add a new Scorer metric you should define a new Scorer subclass like Xapian::NDCGScore and put its implementation in the scorer subdirectory.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Xapian Learning-to-Rank</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#learning-the-model">Learning the model</a></li>
<li><a class="reference internal" href="#ranking">Ranking</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#how-to-use">How to Use</a><ul>
<li><a class="reference internal" href="#checking-quality-of-ranking">Checking quality of ranking</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extendability">Extendability</a><ul>
<li><a class="reference internal" href="#adding-new-features">Adding new Features</a></li>
<li><a class="reference internal" href="#adding-a-new-ltr-algorithm-ranker">Adding a new LTR Algorithm (Ranker)</a></li>
<li><a class="reference internal" href="#adding-a-new-ranking-quality-metric-scorer">Adding a new ranking quality metric (Scorer)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="iterate_all_docs.html"
                        title="previous chapter">Iterate through all documents</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../advanced/index.html"
                        title="next chapter">Advanced features</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/howtos/learning_to_rank.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../advanced/index.html" title="Advanced features"
             >next</a> |</li>
        <li class="right" >
          <a href="iterate_all_docs.html" title="Iterate through all documents"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Getting Started with Xapian v1.4</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >How To...</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2003-2016 Xapian Documentation Team &amp; Contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>